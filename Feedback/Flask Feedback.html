<!DOCTYPE html>
<!-- saved from url=(0098)https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Flask Feedback</title>

    <link rel="stylesheet" href="./Flask Feedback_files/pygments.css" type="text/css">
    <link rel="stylesheet" href="./Flask Feedback_files/handouts-sphinx.css">

    
    <link href="./Flask Feedback_files/css" rel="stylesheet" type="text/css">
    
</head>
<body>
<div id="page-wrapper">
    <div id="page-sidebar">
        <header>
            <p class="project">Springboard</p>

            <p class="title">Flask Feedback</p>

            <p class="backlink"><a href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html"> « Back to Homepage</a></p>

        </header>
        <div id="toc">
            <ul>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#">Flask Feedback</a><ul>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-0-set-up-your-environment">Part 0: Set up your environment</a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-1-create-user-model">Part 1: Create User Model</a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-2-make-a-base-template">Part 2: Make a Base Template</a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-3-make-routes-for-users">Part 3: Make Routes For Users</a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-4-don-t-let-everyone-go-to-secret">Part 4: Don’t let everyone go to <cite>/secret</cite></a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-5-log-out-users">Part 5: Log out users</a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-6-let-s-change-secret-to-users-username">Part 6: Let’s change <cite>/secret</cite> to <cite>/users/&lt;username&gt;</cite></a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-7-give-us-some-more-feedback">Part 7: Give us some more feedback!</a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#part-8-make-modify-routes-for-users-and-feedback">Part 8: Make/Modify Routes For Users and Feedback</a><ul>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#further-study">Further Study</a></li>
<li><a class="reference internal" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#solution">Solution</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    </div>
    <div id="page-content">
        
  <div class="section" id="flask-feedback">
<h1>Flask Feedback</h1>
<p>In this exercise, we’ll be creating an application that lets users sign up
and log in to their own accounts. Once logged in, users can add feedback,
edit their feedback, delete their feedback, and see a list of all feedback
that they’ve given. Many of these routes should be protected, so that for example
<em>user1</em> can’t edit a piece of feedback that <em>user2</em> created. (More on this below.)</p>
<div class="section" id="part-0-set-up-your-environment">
<h2>Part 0: Set up your environment</h2>
<p>You know the drill. Make a venv, pip install all the things, put your code on
GitHub, etc.</p>
</div>
<div class="section" id="part-1-create-user-model">
<h2>Part 1: Create User Model</h2>
<p>First, create a <cite>User</cite> model for SQLAlchemy. Put this in a <cite>models.py</cite> file.</p>
<p>It should have the following columns:</p>
<ul class="simple">
<li><cite>username</cite> - a unique primary key that is no longer than 20 characters.</li>
<li><cite>password</cite> - a not-nullable column that is text</li>
<li><cite>email</cite> - a not-nullable column that is unique and no longer than 50 characters.</li>
<li><cite>first_name</cite> - a not-nullable column that is no longer than 30 characters.</li>
<li><cite>last_name</cite> - a not-nullable column that is no longer than 30 characters.</li>
</ul>
</div>
<div class="section" id="part-2-make-a-base-template">
<h2>Part 2: Make a Base Template</h2>
<p>Add a base template with slots for the page title and content. Your other
templates should use this.</p>
<p>You can use Bootstrap for this project, but don’t spend a lot of time worrying
about styling — this is <strong>not</strong> a goal of this exercise.</p>
</div>
<div class="section" id="part-3-make-routes-for-users">
<h2>Part 3: Make Routes For Users</h2>
<p>Make routes for the following:</p>
<dl class="docutils">
<dt>GET <cite>/</cite></dt><dd>Redirect to /register.</dd>
<dt>GET <cite>/register</cite></dt><dd><p>Show a form that when submitted will register/create a user. This form
should accept a username, password, email, first_name, and last_name.</p>
<p>Make sure you are using WTForms and that your password input hides the
characters that the user is typing!</p>
</dd>
<dt>POST <cite>/register</cite></dt><dd>Process the registration form by adding a new user. Then redirect to <cite>/secret</cite></dd>
<dt>GET <cite>/login</cite></dt><dd><p>Show a form that when submitted will login a user. This form should
accept a username and a password.</p>
<p>Make sure you are using WTForms and that your password input hides the
characters that the user is typing!</p>
</dd>
<dt>POST <cite>/login</cite></dt><dd>Process the login form, ensuring the user is authenticated and going
to <cite>/secret</cite> if so.</dd>
<dt>GET <cite>/secret</cite></dt><dd>Return the text “You made it!” (don’t worry, we’ll get rid of this soon)</dd>
</dl>
</div>
<div class="section" id="part-4-don-t-let-everyone-go-to-secret">
<h2>Part 4: Don’t let everyone go to <cite>/secret</cite></h2>
<p>Despite all of this wonderful password hashing that you have been doing,
anyone can navigate to <cite>/secret</cite> and see the text “You made it!”.
Let’s protect this route and make sure that only users who have logged in
can access this route!</p>
<p>To do that, we’re going to make sure that when we log a user in (and after they
register), we store just a little information in the session.  When the user
successfully registers or logs in, store the <cite>username</cite> in the session.</p>
</div>
<div class="section" id="part-5-log-out-users">
<h2>Part 5: Log out users</h2>
<p>Make routes for the following:</p>
<dl class="docutils">
<dt>GET <cite>/logout</cite></dt><dd>Clear any information from the session and redirect to <cite>/</cite></dd>
</dl>
</div>
<div class="section" id="part-6-let-s-change-secret-to-users-username">
<h2>Part 6: Let’s change <cite>/secret</cite> to <cite>/users/&lt;username&gt;</cite></h2>
<p>Now that we have some logging in and and logging out working. Let’s add some
authorization! When a user logs in, take them to the following route:</p>
<dl class="docutils">
<dt>GET <cite>/users/&lt;username&gt;</cite></dt><dd><p>Display a template the shows information about that user (everything except
for their password)</p>
<p>You should ensure that only logged in users can access this page.</p>
</dd>
</dl>
</div>
<div class="section" id="part-7-give-us-some-more-feedback">
<h2>Part 7: Give us some more feedback!</h2>
<p>It’s time to add another model.</p>
<p>Create a <cite>Feedback</cite> model for SQLAlchemy. Put this in a <cite>models.py</cite> file.</p>
<p>It should have the following columns:</p>
<ul class="simple">
<li><cite>id</cite> - a unique primary key that is an auto incrementing integer</li>
<li><cite>title</cite> - a not-nullable column that is at most 100 characters</li>
<li><cite>content</cite> - a not-nullable column that is text</li>
<li><cite>username</cite> - a foreign key that references the username column in the users table</li>
</ul>
</div>
<div class="section" id="part-8-make-modify-routes-for-users-and-feedback">
<h2>Part 8: Make/Modify Routes For Users and Feedback</h2>
<dl class="docutils">
<dt>GET <cite>/users/&lt;username&gt;</cite></dt><dd><p>Show information about the given user.</p>
<p>Show all of the feedback that the user has given.</p>
<p>For each piece of feedback, display with a link to a form to edit the feedback
and a button to delete the feedback.</p>
<p>Have a link that sends you to a form to add more feedback and a button to delete the user
<strong>Make sure that only the user who is logged in can successfully view this page.</strong></p>
</dd>
<dt>POST <cite>/users/&lt;username&gt;/delete</cite></dt><dd>Remove the user from the database and make sure to also delete all of their
feedback. Clear any user information in the session and redirect to <cite>/</cite>. <strong>Make sure
that only the user who is logged in can successfully delete their account</strong></dd>
<dt>GET <cite>/users/&lt;username&gt;/feedback/add</cite></dt><dd>Display a form to add feedback  <strong>Make sure that only the user who is logged
in can see this form</strong></dd>
<dt>POST <cite>/users/&lt;username&gt;/feedback/add</cite></dt><dd>Add a new piece of feedback and redirect to /users/&lt;username&gt; — <strong>Make sure
that only the user who is logged in can successfully add feedback</strong></dd>
<dt>GET <cite>/feedback/&lt;feedback-id&gt;/update</cite></dt><dd>Display a form to edit feedback — <a href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/index.html#id1"><span class="problematic" id="id2">**</span></a>Make sure that only the user who has written
that feedback can see this form **</dd>
<dt>POST <cite>/feedback/&lt;feedback-id&gt;/update</cite></dt><dd>Update a specific piece of feedback and redirect to /users/&lt;username&gt; —
<strong>Make sure that only the user who has written that feedback can update it</strong></dd>
<dt>POST <cite>/feedback/&lt;feedback-id&gt;/delete</cite></dt><dd>Delete a specific piece of feedback and redirect to /users/&lt;username&gt; —
<strong>Make sure that only the user who has written that feedback can delete it</strong></dd>
</dl>
<div class="section" id="further-study">
<h3>Further Study</h3>
<ul class="simple">
<li>Make sure your registration and authentication logic is being handled in your
<cite>models.py</cite></li>
<li>Make sure that if there is already a <cite>username</cite> in the session, do not allow
users to see the register or login forms</li>
<li>Add a 404 page when a user or feedback can not be found as well as a 401 page
when users are not authenticated or not authorized.</li>
<li>Add a column to the users table called <cite>is_admin</cite> which is a boolean that
defaults to false. If that user is an admin, they should be able to add,
update and delete any feedback for any user as well as delete users.</li>
<li>Make sure that if any of your form submissions fail, you display helpful
error messages to the user about what went wrong.</li>
<li>Tests! Having tests around authentication and authorization is a great way to
save time compared to manually QA-ing your app.</li>
<li><strong>Challenge</strong> Add functionality to reset a password. This will involve
learning about sending emails (take a look at the Flask Mail module. You will
need to use a transactional mail server to get this to work, gmail is an
excellent option) and will require you to add a column to your users table to
store a password reset token. <strong>HINT</strong> - here is how that data flow works<ul>
<li>A user clicks a link and is taken to a form to input their email</li>
<li>If their email exists, send them an email with a link and a unique token in
the query string (take a look at the built in <cite>secrets</cite> module and the
<cite>token_urlsafe</cite> function. You will create this unique token and store it in
the database</li>
<li>Once the user clicks on that link, take them to a form to reset their
password (make sure that the unique token is valid before letting them
access this form)</li>
<li>Once the form has been submitted, update the password in the database and
delete the token created for that user</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="solution">
<h3>Solution</h3>
<p><a class="reference external" href="https://curric.springboard.com/software-engineering-career-track/default/exercises/flask-feedback/solution/index.html">View our solutions</a></p>
</div>
</div>
</div>



    </div>
</div>
<script type="text/javascript" src="./Flask Feedback_files/jquery.js.download"></script>
<script type="text/javascript" src="./Flask Feedback_files/underscore.js.download"></script>
<script type="text/javascript" src="./Flask Feedback_files/doctools.js.download"></script>
<script type="text/javascript" src="./Flask Feedback_files/language_data.js.download"></script> 

</body></html>